<!-- 考的是EventLogger这道题. 总共四个part, Part 4 之前在地里好像没看过
在codesandbox里面, 给你提前提供了
一些 HTML和css不需要动, render一些小方块 (只在part 1有用)
一个 utils file 也不需要动, 里面提供一个假的async function, 用来模拟上传 events
一个 EventLogger class的基本雏形, 只有一个 logEvent function的雏形
一个 index.js 文件, 用来调用 EventLogger class
Part 1
需要用javascript自带的DOM querying functions来找到这些方块, 然后给每个方块加click handler, 每次点击都log一个event
event里需要带一些信息, 都挺简单的 e.g. 这个方块的颜色, 现在的时间等等
Part 2

从part 2开始就不需要管前面那些方块了, 面试官会给你paste进来一些test cases
每个event都上传一次不够efficient, 现在要加一个interval, interval里进来的events都放到一个batch里最后上传
Part 3
如果每次上传events的request都花比较长的时间, 如果在等待的过程中有其他batch的events要上传了, 要等待目前正在上传的那个完成
这里他们给的上传这个util funciton会返回一个promise
Part 4
如果一个上传中的request花费的时间超过三秒钟, 需要把它给abort掉 (提供的helper function自带这个function)
abort掉的batch, 需要和下一个要上传的batch合起来, 然后再次上传 -->

<!--
你将实现一个 EventLogger 类并逐步完善其功能。系统会提前提供 HTML/CSS 和一个模拟上传 API 工具，无需修改。你需要专注于纯 JavaScript 实现。

✅ 提供的内容
6 个彩色方块的 HTML 页面（Part 1 用）

不可修改的 CSS 文件（负责渲染样式）

一个 utils.js 文件：

包含异步的 uploadEvents(events) 方法（返回 Promise）

支持 abort() 功能，用于 Part 4

一个 EventLogger 类的框架

index.js：入口文件，调用 EventLogger

🧩 Part 1 - Attach Click Listeners and Log Events
使用原生 JS（如 document.querySelectorAll()）找到所有 .square 元素。

给每个方块添加 click 事件监听器。

每次点击要调用 EventLogger.logEvent(event)，记录一个 event。

每个 event 需要包含：

方块的颜色（style.backgroundColor）

当前时间（new Date().toISOString()）

任意你认为有用的元数据

🧪 Part 2 - Batch Upload by Interval
不再处理点击事件，而是开始测试 EventLogger 类的行为。

实现一个 batch upload system：

每 2 秒上传一次收集到的 events。

同一时间段内的 events 应该被打包在同一个 array 里上传。

注意：

要维护一个 queue 记录 events。

可以使用 setInterval 定时触发上传逻辑。

上传使用 uploadEvents(batch)。

🚦 Part 3 - Serialize Upload Requests
模拟的 uploadEvents() 是异步的，可能耗时。

如果上一次上传还在进行中，新的一批 events 需要等待上传完毕。

不得并发上传。你需要 queue 后续请求。

技术提示
你需要实现一个机制：只能串行上传。

每次上传完成后才轮到下一个 batch。

Promise chaining、async/await 或 upload queue 均可用。

🧨 Part 4 - Timeout & Retry Failed Batches
如果上传一个 batch 超过 3 秒，认为 超时。

使用提供的 abort API：uploadEvents(events, { signal }) 支持 abort。

超时的 batch 要和下一个 batch 合并上传，并重新上传。

技术提示
使用 AbortController 创建 signal。

上传任务中设置 3 秒超时，若超时：

abortController.abort() 被调用

当前 batch + 下一轮 batch 合并后再次上传

注意合并后上传仍需保证串行执行 -->

<!-- 写一个EventLogger，在点击div的时候需要向server发送信息，会给一个类似fetch的util。

第一问就是找好payload，放进event里call一下就可以了
第二问是如果有个delivery interval，怎么去batch interval之间的call
第三问是如果前一个request还在跑，第二个request进来需要等前一个跑完再跑 -->
