Job Scheduler -
Build a service/system that can support defining and running jobs on a schedule. Requirements:
1. Should be able to create, schedule, and run jobs
2. Should be able to report failures and successes
3. At-least once task execution
4. Should be able to view the status of running/completed jobs
5. Should be able to handle when a job takes longer to run than expected(SLA)ï¼› ğŸ”—Â www.1point3acres.com ğŸ”—Â www.1point3acres.com ğŸ”—Â leetcode.com
é‡ç‚¹é—®äº†fault toleranceã€‚æ¯”å¦‚è¯´æŸä¸ªserviceæŒ‚äº†å’‹åŠã€‚æˆ‘ç”¨äº†MQ æœ‰ä¸€ä¸ªfollowupæ˜¯å¦‚ä½•æ¥æ§åˆ¶éœ€è¦å¤šå°‘äº†consumers. é—®äº†å¦‚ä½•æ¥å®ç°auto retryå¦‚æœä¸€ä¸ªjob failedäº†, é—®äº†å¦‚æœæŸä¸€ä¸ªæ—¶é—´æ®µ æœ‰å¾ˆå¤šjobs éœ€è¦æ€ä¹ˆå¤„ç†, é—®äº†å¦‚æœåœ¨scheduleçš„æ—¶å€™éœ€è¦ä¿è¯high concuâ€â€â€Œâ€â€Œâ€Œâ€Œâ€Œâ€Œâ€â€Œâ€Œâ€Œâ€â€â€Œâ€â€Œâ€Œrrency æ€ä¹ˆå¤„ç†; ä¸éœ€è¦è€ƒè™‘retryçš„æƒ…å†µ, ä½†æ˜¯é—®äº†å…³äºDB schemaçš„ç»†èŠ‚ï¼Œä¾‹å¦‚ä¸€ä¸ªjobå¯ä»¥scheduleä¸€ä¸ªå°æ—¶ä¸€æ¬¡ï¼Œå¦‚ä½•åˆ›é€ ä¸€ä¸ªjob history tableç”¨æ¯ä¸€è¡Œè¡¨ç¤ºæ¯ä¸€ä¸ªå…·ä½“çš„executionã€‚å½“æ—¶é—®æˆ‘job schedulerè¦å¦‚ä½•è‡ªåŠ¨åˆ›å»ºrecurring jobs, table schemaåº”è¯¥æ˜¯ä»€ä¹ˆæ ·çš„; è®¾è®¡Distributed job scheduler 1. create jobs 2. schedule and run jobs 3. report failures and successes 4. reliable and have strong guarantees about its job runs 5. view logs and status of running jobs, as well asâ€â€â€Œâ€â€Œâ€Œâ€Œâ€Œâ€Œâ€â€Œâ€Œâ€Œâ€â€â€Œâ€â€Œâ€Œ previously finished jobs, jobå¯ä»¥recurringå¯ä»¥æ˜¯immediateï¼Œæ•°æ®åº“å…¶å®sql nosqléƒ½å¯ä»¥; 1. Jobå¢åˆ  recurring job 2. Monitoring all jobs status 3. Notification åŸºæœ¬ä¸Šè¦æ³¨æ„çš„å°±æ˜¯problem exploration, DB schema, system compoâ€â€â€Œâ€â€Œâ€Œâ€Œâ€Œâ€Œâ€â€Œâ€Œâ€Œâ€â€â€Œâ€â€Œâ€Œnents, deep dive, edge case handling; ä¸ªäººè§‰å¾—å’ŒDropboxé‚£ä¸ªæ¶æ„æœ€å¤§çš„ä¸åŒæ˜¯è¦æ”¯æŒcronJob. è€ŒDropboxé‚£ä¸ªåªéœ€è¦æ”¯æŒdelay execution, å‡†å¤‡çš„æ—¶å€™è€ƒè™‘ä¸€ä¸‹æ€ä¹ˆä»cronTabè½¬åŒ–æˆéœ€è¦è·‘çš„å•ä¸ªjob. ğŸ”—Â www.1point3acres.com å¯å‚è€ƒhttps://dropbox.tech/infrastruct ... heduling-at-dropbox designä¸€ä¸ªjob schedulerï¼Œå¯ä»¥schedule one time work å’Œrepeated jobã€‚inputæ˜¯ä¸€ä¸ªmeta fileé‡Œé¢æœ‰ä»€ä¹ˆfunctionéœ€è¦è¢«triggerï¼Œéœ€è¦record slaï¼ŒæŠŠprocessè¿‡ä¹…çš„jobå‘notificationç»™clientå‘Šè¯‰ä»–ä»¬è¿˜éœ€è¦å†ç­‰ä¸€ç­‰ã€‚éœ€è¦æŠŠprocess success/fail recordåˆ°databaseé‡Œæ–¹ä¾¿client queryableã€‚


è€é¢˜ job scheduler è¯´è¯´followupå§
æˆ‘ç”¨äº†MQ æœ‰ä¸€ä¸ªfollowupæ˜¯å¦‚ä½•æ¥æ§åˆ¶éœ€è¦å¤šå°‘äº†consumers
é—®äº†å¦‚ä½•æ¥å®ç°auto retryå¦‚æœä¸€ä¸ªjob failedäº†
é—®äº†å¦‚æœæŸä¸€ä¸ªæ—¶é—´æ®µ æœ‰å¾ˆå¤šjobs éœ€è¦æ€ä¹ˆå¤„ç†
é—®äº†å¦‚æœåœ¨scheduleçš„æ—¶å€™éœ€è¦ä¿è¯high concurrency æ€ä¹ˆå¤„ç†


ä½†æˆ‘æœ€ç»ˆè¿˜æ˜¯æŒ‚äº†ï¼Œæœ¬ç€å‰äººæ¯å…·ï¼Œåäººä¹˜å‡‰çš„åŸåˆ™ï¼Œåˆ†äº«ä¸€ä¸‹follow up questions
æ€ä¹ˆç”¨å¤šå°æœºå™¨poll jobs?
æ€ä¹ˆæ§åˆ¶consumersçš„æ•°é‡
å¦‚æœconsumersæ‰§è¡Œåˆ°ä¸€åŠæŒ‚äº†æ€ä¹ˆåŠï¼Ÿ
ä¸ºä»€ä¹ˆæˆ‘é€‰æ‹©nosqlï¼Œå¦‚æœç”¨sql dbï¼Œä¸€æ¬¡æ€§poll 10,000 jobså¯ä¸å¯ä»¥ï¼Ÿ
å¦‚æœä¸€ä¸ªjob executionè¶…æ—¶äº†æ€ä¹ˆåŠï¼Ÿkill job executionï¼Ÿ alert userï¼Ÿ
å‡å¦‚ç”¨ä¸€ä¸ªcoordination serviceï¼Œæ¯”å¦‚zookeeperæ§åˆ¶æ‰€æœ‰çš„job schedule serviceï¼Œç”¨å†…å­˜è¿˜æ˜¯æ•°æ®åº“å­˜è¿™ä¸ªå…³ç³»ï¼Œç”¨ä»€ä¹ˆæ•°æ®ç»“æ„ï¼Ÿ
æ€æ ·ä¿è¯at most executionï¼Ÿ


ä»¥ä¸‹æ˜¯æˆ‘çš„ç­”æ¡ˆ
å°±åƒæ–‡ç« é‡Œè¯´çš„ç”¨segmentï¼Œæ¯ä¸ªsegmentåªè¢«ä¸€ä¸ªjob schedule serviceè¯»
consumersçš„æ•°é‡åº”è¯¥æ ¹æ®kafka commit offsetå’Œlatencyè¿›è¡Œauto scale
æ²¡å›ç­”å‡ºæ¥ï¼Œåæ¥ç ”ç©¶äº†ä¸€ä¸‹ï¼Œä¼¼ä¹åº”è¯¥æ˜¯ monitor consumersï¼ˆwith heartbeat checks and monitor consumer lagï¼‰ï¼›alerting oncallï¼› automatic rebalance between consumers and kafka partitionï¼›automatic/manual restart of consumersï¼› retry failed messagesï¼›
æˆ‘è¯´åº”è¯¥ä¹Ÿè¡Œï¼Œä¹Ÿå°±10,000ä¸ªjobsï¼Œåˆ†10ä¸ªsegmentæ„Ÿè§‰ç”¨relational dbä¹Ÿæ²¡äº‹
æˆ‘è¯´kill jobï¼Œ update job execution historyï¼Œ alert userï¼Œä¸çŸ¥é“å¯¹ä¸å¯¹
æˆ‘è¯´ç”¨memoryé‡Œå­˜hashmapå’Œlinkedlistï¼Œæˆ‘çœŸä¸çŸ¥é“zookeeperç”¨ä»€ä¹ˆæ•°æ®ç»“æ„
æˆ‘è¯´æ¯æ¬¡trigger job executionä¹‹å‰æ£€æŸ¥ job execution history statusæ˜¯ä¸æ˜¯scheduled


Realtime Historical Stock Price - stock price data are from NASDAQ.
design two API 1. get real-time price 2. get historical price
è®¾è®¡ä¸€ä¸ªèƒ½å¤ŸæŸ¥çœ‹å®æ—¶è‚¡ç¥¨ä»·æ ¼å’Œå†å²ä»·æ ¼çš„apiã€‚åç«¯é“¾æ¥ä¸¤ä¸ªçº³æ–¯è¾¾å…‹tcp linkè·å–æ•°æ®ï¼Œæˆ‘è¢«é—®äº†éœ€ä¸éœ€è¦dedupeï¼Œfailoverçš„å…·ä½“æ“ä½œç»†èŠ‚ .éœ€è¦æä¾›ä¸¤ä¸ªAPI, liveQuery and historical queryã€‚å¦ä¸€ç«¯å’Œ3rd party providerè”ç³»ï¼Œæ¥å—è‚¡ç¥¨çš„å®æ—¶Updateï¼Œä¸»è¦æ˜¯write operation, é‡è¦çš„æ˜¯ä½ æ€ä¹ˆå­˜è¿™ä¸ªdataï¼Œè€Œä¸”write QPS ~ 100kï¼Œæ‰€ä»¥è¦è€ƒè™‘æ€ä¹ˆhandleè¿™ä¸ªlevelçš„writeã€‚æˆ‘å½“æ—¶è¯´çš„å¯ä»¥ç”¨redis clusteræ¥handleï¼Œå› ä¸ºwriteæ¯”è¾ƒå¿«ã€‚é¢è¯•å®˜å€’æ˜¯ç‚¹å¤´ï¼Œä½†æ˜¯ä¸çŸ¥é“è¯´çš„å¯¹ä¸å¯¹; ç»™ä¸€ä¸ªstreamä¸æ–­feed inæ•°æ®ï¼Œè®¾è®¡è‚¡ç¥¨å®æ—¶ä»·æ ¼å›¾è¡¨ã€‚

Design stock exchange system for limit order
é‡ç‚¹æ˜¯data modelå’Œfault tolerance;ä¸€ä¸ªrobinhoodçš„äº¤æ˜“ç³»ç»Ÿã€‚Trading Broker ğŸ”—Â www.1point3acres.com